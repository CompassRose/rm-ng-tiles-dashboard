<div class="container-fluid">
  <div class="flex-basis-main">

    <div class="pre-header">

      <span class="accelya-logo-svg">
      </span>
      <span class="airRm-text">AirRM </span>

      <span class="headline-text headline-20-28-600 ps-3">Flags Dashboard</span>

      <div class="logging-center">

        <div id="myavatar-container"
           *ngIf="(imageService.newImage$ | async) && userInfo; else placeholder">
          <a (click)="gottoAvatarScreen()">
            <div id="myNewAvatar"
               [ngStyle]="{backgroundImage: 'url(' + iconFile + ')'}"></div>
          </a>
        </div>

        <ng-template #placeholder>
          <div class="myavatar-container avatar-placeholder"></div>
        </ng-template>

        <div class="logged-in-as ms-2"
           *ngIf="userInfo">
          <div class="body-text body-14-24-600 color-body-text">{{firstName}} {{lastName}}</div>
          <div class="body-text body-12-16-400 color-body-text">{{initials}}</div>
        </div>
        <a class="logout-svg"
           title='Log In to Tiles'
           (click)="gottoAvatarScreen()"></a>
      </div>

    </div>

    <div class="header navy-background">
      <div class="me-2 mt-2">
        <app-priority-chart></app-priority-chart>
      </div>
      <div class="mt-2">
        <monthly-flags-chart></monthly-flags-chart>
      </div>
      <div class="me-3 mt-2">
        <div class="m-2 fw-600">My List</div>
        <div class="list-rect-group">
          <div class="list-column">
            <div class="list-row-group">
              <div class="left-strip blue-tint"></div>
              <div class="list-rect">
                <div class="list-text-group subtitle-text sub-title-20-28-600 ms-2">
                  Title
                  <div class="list-sub">421 Flights</div>
                </div>
                <div class="todo-calendar"></div>
              </div>

            </div>
            <div class="list-row-group">
              <div class="left-strip orange-tint"></div>
              <div class="list-rect">
                <div class="list-text-group subtitle-text sub-title-20-28-600 ms-2">
                  Title
                  <div class="list-sub">388 Flights</div>
                </div>
                <div class="todo-calendar"></div>
              </div>
            </div>
          </div>
          <div class="list-column">
            <div class="list-rect">
              <div class="list-row-group">
                <div class="left-strip magenta-tint"></div>
                <div class="list-rect">
                  <div class="list-text-group subtitle-text sub-title-20-28-600 ms-2">
                    Title
                    <div class="list-sub">126 Flights</div>
                  </div>
                  <div class="todo-calendar"></div>
                </div>
              </div>
              <div class="list-row-group">
                <div class="left-strip green-tint"></div>
                <div class="list-rect">
                  <div class="list-text-group subtitle-text sub-title-20-28-600 ms-2">
                    Title
                    <div class="list-sub">421 Flights</div>
                  </div>
                  <div class="todo-calendar"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="floating-control-panel ">
      <div class="menu-bar-items analysts bordered">
        <analyst-search></analyst-search>
      </div>

      <div class="menu-bar-items ms-auto py-2">
        <div class="list-column-group me-3">
          Flag Type
        </div>

        <div *ngIf="(sortTileOptionsService.flagTypeBehaviorSubject$ | async) as flags"
           class="me-5">
          <ng-select class="custom-select"
             title="Select Flag Type"
             (change)="sortTileOptionsService.selectSortMethod($event)"
             [clearable]="false"
             [searchable]="false"
             [multiple]="true"
             [closeOnSelect]="false"
             [(ngModel)]="sortTileOptionsService.selectedFlags"
             placeholder="Select Flag Type"
             [items]="sortTileOptionsService.flagTypeSelect">
            <ng-template ng-label-tmp
               let-item="item">
              <div>{{item.name}}</div>
            </ng-template>
            <ng-template ng-option-tmp
               let-item="item"
               let-i="index">
              <div class="d-flex">
                <input type="checkbox"
                   [checked]="item.state"
                   (change)="sortTileOptionsService.onFlagsSelected(item, i, true, false)" />
                <div class="d-flex ms-1">
                  <div class="ms-2">
                    {{ item.name }}
                  </div>
                </div>
              </div>
            </ng-template>
          </ng-select>
        </div>
      </div>

      <div class="menu-bar-items ms-auto py-2">
        <div class="list-column-group me-3">
          Sort By
        </div>

        <div *ngIf="(sortTileOptionsService.priorityListBehaviorSubject$ | async) as priorities"
           class="me-5">
          <ng-select class="custom-select"
             title="Select Priority"
             (change)="sortTileOptionsService.selectSortMethod($event)"
             [clearable]="false"
             [searchable]="false"
             [(ngModel)]="sortTileOptionsService.selectedPriority"
             placeholder="Select Priority"
             [items]="priorities">
            <ng-template ng-label-tmp
               let-item="item">
              <div>{{item.name}}</div>
            </ng-template>
            <ng-template ng-option-tmp
               let-item="item">
              <div>
                {{ item.name }}
              </div>
            </ng-template>
          </ng-select>
        </div>
      </div>

    </div>
    <!-- 
    <div class="menu-bar-lower ">
      <div class="routes">
        <route-selection></route-selection>
      </div>
    </div> -->
    <router-outlet></router-outlet>
    <!-- <app-flag-display></app-flag-display> -->

    <div class="footer">
      <span class="accelya-logo-svg"></span>
      <span class="privacy-text">
        Privacy | Terms & Conditions</span>
    </div>
  </div>
</div>